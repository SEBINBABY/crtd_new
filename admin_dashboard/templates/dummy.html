{% extends 'base.html' %}

{% block content %}
  <h1>{{ title }}</h1>
  
  {% if users %}
    <table>
      <thead>
        <tr>
          <th>User Name</th>
          <th>Email</th>
          <!-- Add other columns here -->
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <!-- Add other fields here -->
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No users found.</p>
  {% endif %}
  
  <div class="pagination">
    {% if paginator %}
      <div class="page-selection">
        <label for="page-selector">Go to page:</label>
        <form method="get" action="" class="page-selector-form">
          <select id="page-selector" name="page" onchange="this.form.submit()">
            {% for i in page_range %}
            <option value="{{ i }}" {% if users_page.number == i %}selected{% endif %}>Page {{ i }}</option>
          {% endfor %}
          </select>
        </form>
      </div>

      <span class="step-links">
        {% if users_page.has_previous %}
          <a href="?page=1">« First</a>
          <a href="?page={{ users_page.previous_page_number }}">Previous</a>
        {% endif %}
        <span class="current">
          Page {{ users_page.number }} of {{ users_page.paginator.num_pages }}.
        </span>
        {% if users_page.has_next %}
          <a href="?page={{ users_page.next_page_number }}">Next</a>
          <a href="?page={{ users_page.paginator.num_pages }}">Last »</a>
        {% endif %}
      </span>
    {% endif %}
    
    <!-- Button to show all users -->
    <div class="all-users">
      <a href="?show_all=true" class="btn btn-primary">Show All</a>
    </div>
  </div>

{% endblock %}
