<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test submission dashboard</title>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>
    <div class="main">
        <div class="nav">
            <div class="logo"></div>
            <div class="text">
                <h1>CRTD Technologies Test Submission </h1>
                <h2>Dashboard</h2>
            </div>
            <div class="profile">
                <div class="profile-img">
                    <img src="/static/images/profile.png" alt="">
                </div>
               <h3>Super Admin</h3> 
               <button class="button-1">Log Out</button>
            </div>
        </div>
        <div class="main-box">
            <div class="main-container">

                <div class="icon-1">
                    <img src="/static/images/1.png" alt="">
                </div>
                <!-- Search Bar -->
                <div class="search-container">
                    <form method="GET" action="{% url 'admin_dashboard:user_list' %}">
                    <div class="search-icon">
                    <button type="submit" style="background: none; border: none; padding: 0; cursor: pointer;">
                      <img src="/static/images/search-icon.png" alt="Search Icon">
                    </button>
                    </div>
                    <input
                      type="text"
                      name="query"
                      class="search-input"
                      placeholder="Search here"
                    >
                    </form>
                  </div>
            
                <!-- Filter by Date -->
                <div class="filter-by-date" onclick="openCalendarPopup()">
                    <button type="submit" style="background: none; border: none; padding: 0; cursor: pointer;">
                        <div class="calendar-icon"></div>
                    </button>
                    Filter By Date
                  </div>             
                  <div id="overlay" onclick="closeCalendarPopup()"></div>
                  <form method="GET" action="{% url 'admin_dashboard:user_list' %}">
                  <div id="calendar-popup">
                    <input type="date" id="date-input" name="filter_date">
                    <button class="close-btn" onclick="closeCalendarPopup()" type="submit">Close</button>
                  </div>
                </form>

              <!-- Toggle Buttons -->
              <div class="filter-toggle">
                <label>Filter by</label>
                <a href="{% url 'admin_dashboard:filtered_users' 'submitted' %}"><button class="filter-button active" onclick="toggleActive(this)">Verified</button></a>
                <a href="{% url 'admin_dashboard:filtered_users' 'not_submitted' %}"><button class="filter-button" onclick="toggleActive(this)">Non-Verified</button></a>
              </div>
        </div>
        <div class="content">
            <div class="left">
                <div id="sidebar" class="sidebar">
                    <h3 class="sidebar-title">SuperAdmin</h3>
                    <button class="open-dashboard">Open dashboard</button>
                
                    <div class="favorites">
                      <h4 class="section-title">Favorites</h4>
                      <ul class="sidebar-list">
                        <li class="sidebar-item">Total Account Created</li>
                        <li class="sidebar-item">Not Submitted</li>
                      </ul>
                    </div>
                
                    <div class="dashboards">
                      <h4 class="section-title">Dashboards</h4>
                      <ul class="sidebar-list">
                          <li>
                            <a href="{% url 'admin_dashboard:filtered_users' 'all' %}">
                                <img src="/static/images/2.png" alt="">Total Account Created
                            </a>
                          </li>
                          
                          <li>
                            <a href="{% url 'admin_dashboard:filtered_users' 'submitted' %}">
                              <img src="/static/images/3.png" alt="">Total Submitted
                            </a>
                          </li>
                          <li>
                            <a href="{% url 'admin_dashboard:filtered_users' 'not_submitted' %}">
                              <img src="/static/images/4.png" alt="">Not Submitted
                            </a>
                          </li>
                          <li>
                            <a href="{% url 'admin_dashboard:question_section' %}">
                              <img src="/static/images/5.png" alt="">Question Section  
                            </a>
                          </li>
                          <li>
                            <a href="{% url 'admin_dashboard:verify_passkey' %}">
                              <img src="/static/images/6.png" alt="">Passkey
                            </a>
                          </li>
                          <li>
                            <a href="{% url 'admin_dashboard:verify_passkey' %}">
                              <img src="/static/images/6.png" alt="">Amount
                            </a>
                          </li>
                      </ul>
                    </div>
                  </div>
            </div>
            <div class="right">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>S.no.</th>
                                <th>Full Name</th>
                                <th>E-mail</th>
                                <th>Contact</th>
                                <th>Account Creation Date</th>
                                <th>TCN Number</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in users %}
                            <tr>
                                <td>{{forloop.counter}}.</td>
                                <td>
                                    <div class="user">
                                        <div class="avatar"></div>
                                        <span>{{user.username}}</span>
                                    </div>
                                </td>
                                <td>{{user.email}}</td>
                                <td>{{user.contact_number}}</td>
                                <td>{{user.created_at|date:"d-m-Y"}}</td>
                                <td>{{user.tcn_number}}</td>
                                {% if user.is_verified %}
                                <td><span class="status verified">Verified</span></td>
                                {% elif not user.is_verified %}
                                <td><span class="status not-verified">Not Verified</span></td>
                                {% endif %}
                                <td>
                                    <div class="action-btns">
                                        <img class="delete-btn" src="/static/images/delete-1.png" alt="Delete">
                                        <img class="eye-btn" src="/static/images/eye.png" alt="See">
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <button class="move-to-top-btn">
                    Move to top
                    <div class="arrow-up"></div>
                  </button>
        </div>
    </div>
    <script>
        function openCalendarPopup() {
          document.getElementById('calendar-popup').style.display = 'block';
          document.getElementById('overlay').style.display = 'block';
        }
      
        function closeCalendarPopup() {
          document.getElementById('calendar-popup').style.display = 'none';
          document.getElementById('overlay').style.display = 'none';
        }

        const toggleIcon = document.querySelector('.icon-1');
        const sidebar = document.getElementById('sidebar');
        const mainContainer = document.querySelector('.main-container');
        const content = document.querySelector('.content');


// Toggle sidebar visibility
toggleIcon.addEventListener('click', () => {
  sidebar.classList.toggle('active');
  
  if (sidebar.classList.contains('active')) {
    // Open sidebar and apply styles
    content.style.marginLeft = '250px';
    content.style.width = '80%';
    mainContainer.style.marginLeft = '300px';
    mainContainer.style.width = '78%';
    toggleIcon.style.height = '40px';
    toggleIcon.style.marginRight = '5%';
    toggleIcon.style.width = '40px';
  } else {
    // Close sidebar and reset to default styles
    content.style.marginLeft = '0';
    content.style.width = '100%';
    mainContainer.style.marginLeft = '0';
    mainContainer.style.width = '100%';
    toggleIcon.style.height = '40px';
    toggleIcon.style.marginRight = '0';
    toggleIcon.style.width = '40px';
  }
});

      </script>
</body>
</html>

