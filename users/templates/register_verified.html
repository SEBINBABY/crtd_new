<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desktop 5</title>
    <link rel="stylesheet" href="{% static 'css/register_verified.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

</head>
<body>
    <div class="box">
        <div class="box-left">
            <div class="left-logo"></div>
            <div class="left-img"></div>
        </div>
        <div class="box-right">
            <div class="content-box">
                <h2>Create Account</h2>
                <div class="msg-container">
                {% if messages %}
                    <div class="messages">
                    {% for message in messages %}
                    <div class="alertt alertt-{{ message.tags }}">
                    {{ message }}
                    </div>
                    {% endfor %}
                    </div>
                {% endif %}
                </div>
                <form action="{% url 'users:register_verified' %}" method="POST">
                    {% csrf_token %}
                <div class="content-input">
                    <label for="" class="form-label">Full name*</label>
                    <input type="text" id="displayName" class="form-control" value="{{full_name|default:''}}" name="full_name" required>
                    <label for="" class="form-label">Email ID*</label>
                    <div class="check-perform">
                    <input type="email" id="displayEmail" class="form-control" value="{{ email|default:'' }}"
                    name="email" required>
                    <button class="verified" type="submit">Verified  <span>&#10003</span></button>
                    </div>
                    <label for="" class="form-label">Contact Number*</label>
                    <input type="text" id="displayContact" class="form-control"
                    name="contact_number"  min="10" max="10" id="displayContact" pattern="^\d{10}$" 
                    title="Contact number must be exactly 10 digits and contain only numbers." required>
                    <label for="" class="form-label">Create Password*</label>
                    <input type="password" id="inputPassword" class="form-control" placeholder="Enter Password"
                    name="password" required>
                    <i id="togglePassword1" class="fa-solid fa-eye icon-1"></i>

                    <label for="" class="form-label last-label">Confirm Password*</label>
                    <input type="password" id="inputPassword2" class="form-control" placeholder="Confirm Password"
                    name="confirm_password" required>
                    <i id="togglePassword2" class="fa-solid fa-eye icon-2"></i>

                </div>
                <button class="submit-btn" type="submit">Submit</button>
            </form>
            </div>
        </div>
    </div>
    <script>
        // Retrieve data from session storage
        const fullName = sessionStorage.getItem("full_name");
        const email = sessionStorage.getItem("email");
        const contactNumber = sessionStorage.getItem("contact_number");
        const Password = sessionStorage.getItem("password");
        

        // Populate the fields or display data
        document.getElementById("displayName").value = fullName || "";
        document.getElementById("displayEmail").value = email || "";
        document.getElementById("displayContact").value = contactNumber || "";
        document.getElementById("inputPassword").value = Password || "";
        document.getElementById("inputPassword2").value = Password || "";

    function showMessage(message) {
    const messageContainer = document.querySelector('.msg-container');

    // Create a new error message div
    const errorDiv = document.createElement('div');
    errorDiv.className = 'error-message'; // Custom red styling
    errorDiv.innerText = message;

    // Clear any existing messages before adding a new one
    messageContainer.innerHTML = '';
    messageContainer.appendChild(errorDiv);
    messageContainer.style.display = "block"; // Ensure it's visible
}


        // Function to validate contact number
        function validateContactNumber(contact) {
        const contactRegex = /^\d{10}$/; // Regex to check for exactly 10 digits
        return contactRegex.test(contact);
    }


    // Attach validation to the submit button
    document.querySelector(".submit-btn").addEventListener("click", function (event) {
        const contactInput = document.getElementById("displayContact").value.trim();

        // Check if contact number is entered and valid
        if (contactInput && !validateContactNumber(contactInput)) {
            showMessage("Contact number must be exactly 10 digits and contain only numbers.", "danger");
            event.preventDefault(); // Prevent form submission
            return;
        }

        // Additional validations can be added here
    });

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        const togglePassword1 = document.querySelector('#togglePassword1');
        const password = document.querySelector('#inputPassword');
        const btn = document.querySelector(".submit-btn");

        togglePassword1.addEventListener('click', function () {
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);
        });

        const togglePassword2 = document.querySelector('#togglePassword2');
        const password2 = document.querySelector('#inputPassword2');

        togglePassword2.addEventListener('click', function () {  
        const type = password2.getAttribute('type') === 'password' ? 'text' : 'password';
        password2.setAttribute('type', type);
        });
    </script>

</body>
</html>